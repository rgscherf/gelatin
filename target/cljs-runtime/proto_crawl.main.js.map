{"version":3,"sources":["proto_crawl/main.cljs"],"mappings":";;;;;;;;;;AAWA,AAAA,AAACA;AACD,AAAMC,AAAmBC;AAEzB,AAAA,AAACC,AAEC,AAAKC;AAAL,AACE,AAACC;;AAEL,AAAA,AAAAC,AAAAC,AAAAC;AAAA;AAAA,AAAA,AAASC,AAAkB,AAAA,AAACC;;AAE5B,AAAA,AAAMC,AACHC;AADH,AAEE,AAAAC,AAAA,AAAA,AAAwB,AAAOD;AAA/B,AAAA,AAAAC,AAAAA,AAACC,AAAAA,AAAAA;;AAEH,AAAA,AAAMC;AAAN,AAEE,AAAA,AAAmBC,AAAsBL;;AAG3C,AAAA,AAAMM;AAAN,AAIE,AAAAC,AAAA,AAAA;AAAA,AAAA,AAAAA,AAAAA,AAACC,AAAAA,AAAAA;;AAGD,AAAA,AAAAC,AAAKX;AACH,AAAI,AAACM;;AACD,AAAA,AAACM,AAAOZ;;AAFd;;AAKA,AAAA,AAACa,AACEC,AACD,AAAA,AAAiBP","names":["cljs.spec.alpha/check-asserts","cljs.spec.alpha/*explain-out*","expound.alpha/printer","re_frame.core.reg_event_db.cljs$core$IFn$_invoke$arity$2","_","proto-crawl.re-frame.state/init-game-state","js/proto-crawl","js/proto-crawl.main","js/proto-crawl.main.add-key-listener?","proto-crawl.main/add-key-listener?","reagent.core.atom.cljs$core$IFn$_invoke$arity$1","proto-crawl.main/on-game-keydown","key-event","G__45059","re-frame.core/dispatch","proto-crawl.main/add-global-event-listeners","js/document","proto-crawl.main/main","G__45060","re-frame.core/dispatch-sync","cljs.core/deref","cljs.core/reset!","reagent.core.render.cljs$core$IFn$_invoke$arity$2","proto-crawl.view.main/game-root"],"sourcesContent":["(ns proto-crawl.main\n  (:require\n    [reagent.core :as r]\n    [re-frame.core :as rf]\n    [expound.alpha :as expound]\n    [cljs.spec.alpha :as spec]\n    [proto-crawl.view.main :as main-view]\n    [proto-crawl.re-frame.events]\n    [proto-crawl.re-frame.subs]\n    [proto-crawl.re-frame.state :as game-state]))\n\n(spec/check-asserts true)\n(set! spec/*explain-out* expound/printer)\n\n(rf/reg-event-db\n  :init-game\n  (fn [_]\n    (game-state/init-game-state)))\n\n(defonce add-key-listener? (r/atom true))\n\n(defn on-game-keydown\n  [key-event]\n  (rf/dispatch [:key-down (.-key key-event)]))\n\n(defn add-global-event-listeners\n  []\n  (.addEventListener js/document \"keydown\" on-game-keydown))\n\n\n(defn main\n  []\n\n  ;; First, init the game.\n  (rf/dispatch-sync [:init-game])\n\n  ;; Add event listeners...\n  (if @add-key-listener?\n    (do (add-global-event-listeners)\n        (reset! add-key-listener? false)))\n\n  ;; Then render the main scene.\n  (r/render\n    [main-view/game-root]\n    (.getElementById js/document \"root\")))\n\n\n\n\n\n\n\n\n\n"]}